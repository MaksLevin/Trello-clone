<button mat-icon-button class="button-delete" (click)="deleteListDumb(listId)">
  <mat-icon>delete_outline</mat-icon>
</button>

<mat-card-title *ngIf="!isTitleEditMode; else editTitle">
  <h4 class="mt-10 mb-20" (click)="toggleTitleEditMode(listId)">{{ listTitle }}</h4>
</mat-card-title>

<ng-template #editTitle>
  <mat-form-field class="list-field">
    <mat-label class="list-field-title">Title</mat-label>
    <input
      #inputTitle
      matInput
      placeholder="title"
      [value]="listTitle"
      (keyup.enter)="sendEditableListTitle(listId, inputTitle.value)"
    />
  </mat-form-field>
</ng-template>

<mat-card-actions
  class="list-actions"
  [ngStyle]="{
    display: isTitleEditMode ? 'block' : 'none'
  }"
>
  <button class="button-primary" mat-button (click)="cancelListEdit()">cancel</button>
</mat-card-actions>

<div
  class="tasks-wrapper"
  cdkDropList
  id="{{ listId }}"
  [cdkDropListData]="(tasks$ | async) || []"
  [cdkDropListConnectedTo]="listsId"
  (cdkDropListDropped)="drop($event)"
>
  <ng-container *ngIf="tasks$ | async as tasks">
    <ng-container *ngFor="let task of tasks; let index = index">
      <app-task
        cdkDrag
        class="list-content"
        [cdkDragData]="task"
        [listId]="listId"
        [taskId]="task.id"
        [taskTitle]="task.title"
        (deleteTask)="deleteTask($event)"
      ></app-task>
    </ng-container>
  </ng-container>
</div>

<mat-card-content class="task-form" [formGroup]="taskForm">
  <mat-form-field class="task-field">
    <input
      #inputTaskTitle
      matInput
      formControlName="taskTitle"
      placeholder="Add new task"
      (keyup.enter)="createNewTask(listId, inputTaskTitle.value)"
    />
  </mat-form-field>
</mat-card-content>
